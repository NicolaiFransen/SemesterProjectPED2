Version 4
SHEET 1 5608 1392
WIRE 816 -624 736 -624
WIRE 736 -592 736 -624
WIRE -112 -576 -128 -576
WIRE 48 -576 32 -576
WIRE 1136 -576 1120 -576
WIRE 1232 -576 1216 -576
WIRE 1248 -576 1232 -576
WIRE 1392 -576 1328 -576
WIRE -128 -560 -128 -576
WIRE 32 -560 32 -576
WIRE 1392 -544 1392 -576
WIRE 272 -528 272 -544
WIRE 368 -528 368 -544
WIRE 464 -528 464 -544
WIRE 560 -528 560 -544
WIRE 1232 -496 1232 -576
WIRE -128 -464 -128 -480
WIRE -48 -464 -128 -464
WIRE 32 -464 32 -480
WIRE 112 -464 32 -464
WIRE -128 -448 -128 -464
WIRE 32 -448 32 -464
WIRE 272 -432 272 -448
WIRE 368 -432 368 -448
WIRE 368 -432 272 -432
WIRE 416 -432 368 -432
WIRE 464 -432 464 -448
WIRE 464 -432 416 -432
WIRE 560 -432 560 -448
WIRE 560 -432 464 -432
WIRE 416 -400 416 -432
WIRE -128 -352 -128 -368
WIRE -112 -352 -128 -352
WIRE 32 -352 32 -368
WIRE 48 -352 32 -352
WIRE 816 -320 816 -624
WIRE 1104 -320 816 -320
WIRE 1472 -320 1104 -320
WIRE 224 -304 208 -304
WIRE 416 -304 416 -320
WIRE 208 -288 208 -304
WIRE 816 -288 816 -320
WIRE 816 -288 688 -288
WIRE 1472 -288 1472 -320
WIRE 1472 -288 1344 -288
WIRE 816 -256 816 -288
WIRE 1472 -256 1472 -288
WIRE 144 -240 128 -240
WIRE 32 -176 -16 -176
WIRE 128 -176 128 -240
WIRE 128 -176 112 -176
WIRE 208 -176 208 -192
WIRE 352 -176 208 -176
WIRE 480 -176 464 -176
WIRE 576 -176 560 -176
WIRE 688 -176 688 -224
WIRE 688 -176 656 -176
WIRE 736 -176 688 -176
WIRE 768 -176 736 -176
WIRE 1104 -176 1088 -176
WIRE 1216 -176 1184 -176
WIRE 1344 -176 1344 -224
WIRE 1344 -176 1296 -176
WIRE 1360 -176 1344 -176
WIRE 1392 -176 1360 -176
WIRE 1424 -176 1392 -176
WIRE -352 -160 -384 -160
WIRE 208 -160 208 -176
WIRE 688 -144 688 -176
WIRE 736 -144 736 -176
WIRE 1344 -144 1344 -176
WIRE 1392 -144 1392 -176
WIRE -560 -128 -640 -128
WIRE -400 -128 -480 -128
WIRE -352 -128 -352 -160
WIRE -640 -112 -640 -128
WIRE 128 -112 128 -176
WIRE 144 -112 128 -112
WIRE -688 -96 -816 -96
WIRE -480 -96 -480 -128
WIRE -384 -64 -384 -160
WIRE -352 -64 -384 -64
WIRE -80 -64 -112 -64
WIRE 208 -48 208 -64
WIRE 224 -48 208 -48
WIRE 688 -48 688 -80
WIRE 736 -48 736 -64
WIRE 816 -48 816 -160
WIRE 816 -48 736 -48
WIRE 1344 -48 1344 -80
WIRE 1392 -48 1392 -64
WIRE 1472 -48 1472 -160
WIRE 1472 -48 1392 -48
WIRE -816 -32 -816 -96
WIRE -400 -32 -400 -128
WIRE -352 -32 -400 -32
WIRE -16 -32 -16 -176
WIRE -16 -32 -112 -32
WIRE -688 -16 -688 -48
WIRE -640 -16 -640 -32
WIRE -560 -16 -640 -16
WIRE -480 -16 -480 -32
WIRE -480 -16 -560 -16
WIRE -80 0 -112 0
WIRE -560 16 -560 -16
WIRE 704 16 688 16
WIRE 816 16 816 -48
WIRE 816 16 784 16
WIRE 1376 16 1344 16
WIRE 1472 16 1472 -48
WIRE 1472 16 1456 16
WIRE -352 32 -432 32
WIRE -816 64 -816 48
WIRE -352 64 -400 64
WIRE -80 64 -112 64
WIRE 224 64 208 64
WIRE 816 64 816 16
WIRE 816 64 688 64
WIRE 1392 64 816 64
WIRE 1472 64 1472 16
WIRE 1472 64 1392 64
WIRE 1536 64 1472 64
WIRE -432 80 -432 32
WIRE -432 80 -832 80
WIRE -416 80 -432 80
WIRE 208 80 208 64
WIRE -400 96 -400 64
WIRE -400 96 -752 96
WIRE -352 96 -384 96
WIRE -16 96 -112 96
WIRE 688 96 688 64
WIRE 1392 96 1392 64
WIRE -832 112 -832 80
WIRE 816 112 816 64
WIRE 1472 112 1472 64
WIRE -416 128 -416 80
WIRE -352 128 -416 128
WIRE -80 128 -112 128
WIRE 144 128 128 128
WIRE -384 160 -384 96
WIRE -384 160 -512 160
WIRE -752 192 -752 96
WIRE -752 192 -832 192
WIRE -512 192 -512 160
WIRE -512 192 -544 192
WIRE -480 192 -512 192
WIRE -16 192 -16 96
WIRE 32 192 -16 192
WIRE 128 192 128 128
WIRE 128 192 112 192
WIRE 208 192 208 176
WIRE 352 192 208 192
WIRE 480 192 464 192
WIRE 576 192 560 192
WIRE 688 192 688 160
WIRE 688 192 656 192
WIRE 736 192 688 192
WIRE 768 192 736 192
WIRE 1104 192 1088 192
WIRE 1216 192 1184 192
WIRE 1344 192 1296 192
WIRE 1360 192 1344 192
WIRE 1392 192 1392 160
WIRE 1392 192 1360 192
WIRE 1424 192 1392 192
WIRE -480 208 -480 192
WIRE 208 208 208 192
WIRE -832 224 -832 192
WIRE 688 224 688 192
WIRE 736 224 736 192
WIRE 1344 224 1344 192
WIRE 1392 224 1392 192
WIRE 128 256 128 192
WIRE 144 256 128 256
WIRE -512 272 -544 272
WIRE -480 272 -512 272
WIRE -512 320 -512 272
WIRE 208 320 208 304
WIRE 224 320 208 320
WIRE 688 320 688 288
WIRE 736 320 736 304
WIRE 816 320 816 208
WIRE 816 320 736 320
WIRE 1344 320 1344 288
WIRE 1392 320 1392 304
WIRE 1472 320 1472 208
WIRE 1472 320 1392 320
WIRE 720 384 688 384
WIRE 816 384 816 320
WIRE 816 384 800 384
WIRE 1376 384 1344 384
WIRE 1472 384 1472 320
WIRE 1472 384 1456 384
WIRE 816 416 816 384
WIRE 1120 416 816 416
WIRE 1472 416 1472 384
WIRE 1472 416 1120 416
WIRE 1120 432 1120 416
WIRE 512 512 304 512
WIRE 240 544 224 544
WIRE 384 544 368 544
WIRE 240 576 240 544
WIRE 368 576 368 544
WIRE 304 592 304 512
WIRE 304 592 288 592
WIRE 320 592 304 592
WIRE 304 640 288 640
WIRE 320 640 304 640
WIRE 304 656 304 640
WIRE 240 688 240 656
WIRE 368 688 368 656
WIRE 512 688 512 512
WIRE 240 784 240 768
WIRE 368 784 368 768
WIRE 512 784 512 768
FLAG 464 -176 GH
FLAG 736 -176 G_H1
FLAG 1088 -176 GH
FLAG 1360 -176 G_H2
FLAG 736 -512 0
FLAG 464 192 GL
FLAG 736 192 G_L1
FLAG 1088 192 GL
FLAG 1360 192 G_L2
FLAG 1120 432 0
FLAG 1536 64 phase
FLAG 352 -176 GH
FLAG 352 192 GL
FLAG 1392 -464 0
FLAG 1120 -576 phase
FLAG 112 -464 phase
FLAG 368 784 0
FLAG 304 656 0
FLAG 512 784 0
FLAG 240 784 0
FLAG 32 -576 VH+
FLAG 32 -352 VH-
FLAG -128 -576 VL+
FLAG -128 -352 VL-
FLAG -48 -464 0
FLAG 208 -304 VH+
FLAG 208 -48 VH-
FLAG 208 64 VL+
FLAG 208 320 VL-
FLAG 240 544 phase
FLAG 368 544 startup
FLAG 1136 -496 startup
FLAG 416 -304 0
FLAG 560 -432 T_board
FLAG 272 -544 Tc_H1
FLAG 368 -544 Tc_H2
FLAG 464 -544 Tc_L1
FLAG 560 -544 Tc_L2
FLAG 1104 -320 supply
FLAG -816 -96 PWM_H
FLAG 128 -176 DriverH
FLAG 128 192 DriverL
FLAG -80 -64 VH+
FLAG -80 0 VH-
FLAG -80 64 VL+
FLAG -80 128 VL-
FLAG -832 224 COM
FLAG -816 64 COM
FLAG -688 -16 COM
FLAG -560 16 COM
FLAG -352 -128 COM
FLAG -512 320 COM
SYMBOL res 560 -160 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName RG_H1
SYMATTR Value {Rg}
SYMBOL res 1200 -160 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName RG_H2
SYMATTR Value {Rg}
SYMBOL voltage 736 -608 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 36
SYMBOL res 560 208 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName RG_L1
SYMATTR Value {Rg}
SYMBOL res 1200 208 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName RG_L2
SYMATTR Value {Rg}
SYMBOL voltage -816 -48 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -131 22 VRight 2
SYMATTR InstName V3
SYMATTR Value PULSE({-Vneg} 15 11u 10n 10n {t_onH} {T})
SYMBOL e -640 -128 R0
SYMATTR InstName E1
SYMATTR Value 1
SYMBOL ind 1120 -560 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 380µ
SYMBOL res 1232 -560 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R_Load
SYMATTR Value 2.6m
SYMBOL voltage 1392 -560 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V5
SYMATTR Value 18
SYMBOL PHPT60415NY 192 -240 R0
SYMATTR InstName U5
SYMBOL PHPT60415PY 192 -112 M180
SYMATTR InstName U6
SYMBOL voltage 32 -464 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V6
SYMATTR Value {Vneg}
SYMBOL voltage 32 -576 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V7
SYMATTR Value 15
SYMBOL res 128 -192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R_BJT_H
SYMATTR Value 1
SYMBOL sw 240 672 R180
SYMATTR InstName S1
SYMBOL sw 368 672 M180
SYMATTR InstName S2
SYMBOL voltage 368 672 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V8
SYMATTR Value {V_Istart}
SYMBOL Misc\\signal 512 672 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V11
SYMATTR Value PULSE(-1 1 100n 100n 100n 10.1u)
SYMBOL voltage 240 672 M0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V12
SYMATTR Value 0
SYMBOL res 1376 -160 R0
SYMATTR InstName R2
SYMATTR Value 100k
SYMBOL zener 704 -144 M0
SYMATTR InstName D1
SYMATTR Value EDZV10B
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL diode 704 16 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL voltage -128 -464 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V13
SYMATTR Value {Vneg}
SYMBOL voltage -128 -576 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V14
SYMATTR Value 15
SYMBOL PHPT60415NY 192 128 R0
SYMATTR InstName U1
SYMBOL PHPT60415PY 192 256 M180
SYMATTR InstName U2
SYMBOL res 128 176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R_BJT_L
SYMATTR Value 1
SYMBOL voltage 416 -416 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V9
SYMATTR Value 50
SYMBOL res 256 -544 R0
SYMATTR InstName R5
SYMATTR Value 0.4
SYMBOL res 352 -544 R0
SYMATTR InstName R6
SYMATTR Value 0.4
SYMBOL res 448 -544 R0
SYMATTR InstName R7
SYMATTR Value 0.4
SYMBOL res 544 -544 R0
SYMATTR InstName R8
SYMATTR Value 0.4
SYMBOL zener 1360 -144 M0
SYMATTR InstName D3
SYMATTR Value EDZV10B
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL diode 1360 16 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMATTR Value 1N4148
SYMBOL diode 704 384 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D6
SYMATTR Value 1N4148
SYMBOL zener 1360 224 M0
SYMATTR InstName D7
SYMATTR Value EDZV10B
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL diode 1360 384 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D8
SYMATTR Value 1N4148
SYMBOL res 720 -160 R0
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL res 720 208 R0
SYMATTR InstName R3
SYMATTR Value 100k
SYMBOL res 1376 208 R0
SYMATTR InstName R4
SYMATTR Value 100k
SYMBOL res 800 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 1m
SYMBOL res 1472 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 1m
SYMBOL res 816 368 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 1m
SYMBOL res 1472 368 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 1m
SYMBOL ind 464 -160 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L2
SYMATTR Value 30n
SYMBOL ind 464 208 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L3
SYMATTR Value 30n
SYMBOL ind 1088 208 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L4
SYMATTR Value 30n
SYMBOL ind 1088 -160 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L5
SYMATTR Value 30n
SYMBOL zener 704 224 M0
SYMATTR InstName D5
SYMATTR Value EDZV10B
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL InfineonNMOS\\IPT012N08N5_L1 768 112 R0
SYMATTR InstName U3
SYMBOL InfineonNMOS\\IPT012N08N5_L1 1424 112 R0
SYMATTR InstName U4
SYMBOL InfineonNMOS\\IPT012N08N5_L1 1424 -256 R0
SYMATTR InstName U7
SYMBOL InfineonNMOS\\IPT012N08N5_L1 768 -256 R0
SYMATTR InstName U8
SYMBOL UCC20225_TRANS -240 32 R0
SYMATTR InstName U9
SYMBOL res -464 -144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 47
SYMBOL cap -496 -96 R0
SYMATTR InstName C1
SYMATTR Value 33p
SYMBOL res -528 288 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R14
SYMATTR Value 100k
SYMBOL cap -496 208 R0
SYMATTR InstName C2
SYMATTR Value 2.2n
SYMBOL voltage -832 96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 15
SYMBOL PHPT60415NY 400 -48 R0
SYMATTR InstName U10
TEXT -200 504 Left 2 !.tran 0 110u 1us
TEXT 1304 792 Left 2 !.options cshunt=1e-14
TEXT 1304 696 Left 2 !.options gmin=1e-10
TEXT 1304 728 Left 2 !.options abstol=1e-10
TEXT 1304 760 Left 2 !.options reltol=0.0059
TEXT 984 824 Left 2 !.model SW SW(Ron=.1u Roff=1Meg Vt=0 Vh=-.5)
TEXT -192 576 Left 2 !.param Rg 2.7
TEXT 696 688 Left 2 !.param Lx 1
TEXT 592 512 Left 2 ;M_H1
TEXT 592 544 Left 2 ;M_H2
TEXT 592 576 Left 2 ;M_L1
TEXT 592 608 Left 2 ;M_L2
TEXT 592 640 Left 2 ;Lx: Par. Inductance On: Lx = 1   Off: Lx = 1u\nx:  Nom/Max parameter value. 0= Nom, 1=Max
TEXT -216 552 Left 2 ;Gate resistance
TEXT 568 488 Left 2 ;Mosfet model parameters:
TEXT 256 -632 Left 2 ;Thermal
TEXT -152 -632 Left 2 ;Gate driver supply
TEXT 704 -640 Left 2 ;Phase supply
TEXT 1056 -640 Left 2 ;Phase load
TEXT 1272 672 Left 2 ;Simulation options
TEXT -216 480 Left 2 ;Transient control
TEXT 176 480 Left 2 ;Startup: Load current ramp-up
TEXT -192 648 Left 2 ;I(L1) start       Vx
TEXT 976 800 Left 2 ;Ideal switch model
TEXT -208 768 Left 2 !.param V_Istart -1400
TEXT -208 792 Left 2 ;.step param V_Istart list 1400 -1400
TEXT -216 624 Left 2 ;Startup: Vx determins I(L1)
TEXT -88 680 Right 2 ;+350A\n0A\n-355A
TEXT 16 680 Right 2 ;-1400V\n18V\n+1400V
TEXT -192 592 Left 2 ;.step param Rg list 10 1
TEXT -208 872 Left 2 ;Go to Control Panel > Save Defaults\nSave subcircuit node voltages
TEXT 264 888 Left 2 !.param duty=0.591 freq=20k T={1/freq} DT=1u t_onH={T*duty-DT} t_onL={T*{1-duty}-DT}
TEXT 272 864 Left 3 ;Frequency control  -  PWM
TEXT -160 -264 Left 2 !.param Vneg 8.7
TEXT 696 712 Left 2 !.param x 1
TEXT 1216 -648 Left 2 !.ic I(L1)=100
