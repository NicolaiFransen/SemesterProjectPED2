Version 4
SHEET 1 5608 2428
WIRE -96 -736 -96 -768
WIRE 256 -736 256 -768
WIRE -96 -656 -160 -656
WIRE -32 -656 -96 -656
WIRE 256 -656 192 -656
WIRE 320 -656 256 -656
WIRE -160 -608 -160 -656
WIRE 192 -608 192 -656
WIRE -96 -576 -96 -592
WIRE -32 -576 -32 -592
WIRE -32 -576 -96 -576
WIRE 64 -576 -32 -576
WIRE 256 -576 256 -592
WIRE 320 -576 320 -592
WIRE 320 -576 256 -576
WIRE 416 -576 320 -576
WIRE 1136 -576 1120 -576
WIRE 1232 -576 1216 -576
WIRE 1248 -576 1232 -576
WIRE 1392 -576 1328 -576
WIRE -96 -560 -96 -576
WIRE -32 -560 -32 -576
WIRE 256 -560 256 -576
WIRE 320 -560 320 -576
WIRE 1392 -544 1392 -576
WIRE -160 -496 -160 -544
WIRE -96 -496 -160 -496
WIRE -32 -496 -96 -496
WIRE 192 -496 192 -544
WIRE 256 -496 192 -496
WIRE 320 -496 256 -496
WIRE 1232 -496 1232 -576
WIRE -896 -432 -1120 -432
WIRE -688 -432 -896 -432
WIRE -96 -432 -96 -496
WIRE 32 -432 32 -448
WIRE 32 -432 -16 -432
WIRE 256 -432 256 -496
WIRE 384 -432 384 -448
WIRE 384 -432 336 -432
WIRE -896 -400 -896 -432
WIRE -688 -384 -688 -432
WIRE 1968 -384 1168 -384
WIRE -1120 -368 -1120 -432
WIRE 1104 -320 816 -320
WIRE 1168 -320 1168 -384
WIRE 1168 -320 1104 -320
WIRE 1472 -320 1168 -320
WIRE 224 -304 208 -304
WIRE -896 -288 -896 -320
WIRE -736 -288 -736 -304
WIRE -736 -288 -896 -288
WIRE -576 -288 -688 -288
WIRE -528 -288 -576 -288
WIRE -416 -288 -448 -288
WIRE 208 -288 208 -304
WIRE -1632 -256 -1632 -304
WIRE -1552 -256 -1632 -256
WIRE -1488 -256 -1488 -304
WIRE -1120 -256 -1120 -288
WIRE -1120 -256 -1200 -256
WIRE -416 -256 -416 -288
WIRE -384 -256 -416 -256
WIRE 816 -256 816 -320
WIRE 1472 -256 1472 -320
WIRE 144 -240 128 -240
WIRE -1120 -224 -1120 -256
WIRE -768 -224 -912 -224
WIRE -576 -224 -688 -224
WIRE -528 -224 -576 -224
WIRE -416 -224 -416 -256
WIRE -416 -224 -448 -224
WIRE -1632 -192 -1632 -256
WIRE -912 -192 -912 -224
WIRE 32 -176 -64 -176
WIRE 128 -176 128 -240
WIRE 128 -176 112 -176
WIRE 208 -176 208 -192
WIRE 352 -176 208 -176
WIRE 480 -176 464 -176
WIRE 576 -176 560 -176
WIRE 736 -176 656 -176
WIRE 768 -176 736 -176
WIRE 1104 -176 1088 -176
WIRE 1216 -176 1184 -176
WIRE 1360 -176 1296 -176
WIRE 1392 -176 1360 -176
WIRE 1424 -176 1392 -176
WIRE 208 -160 208 -176
WIRE -768 -144 -768 -224
WIRE -736 -144 -768 -144
WIRE 736 -144 736 -176
WIRE 1392 -144 1392 -176
WIRE 128 -112 128 -176
WIRE 144 -112 128 -112
WIRE -1120 -96 -1120 -144
WIRE -912 -96 -912 -112
WIRE -912 -96 -1120 -96
WIRE -720 -96 -912 -96
WIRE -688 -96 -688 -128
WIRE -688 -96 -720 -96
WIRE 208 -48 208 -64
WIRE 224 -48 208 -48
WIRE 688 -48 688 -80
WIRE 736 -48 736 -64
WIRE 816 -48 816 -160
WIRE 816 -48 736 -48
WIRE 1344 -48 1344 -80
WIRE 1392 -48 1392 -64
WIRE 1472 -48 1472 -160
WIRE 1472 -48 1392 -48
WIRE 1968 0 1968 -384
WIRE 704 16 688 16
WIRE 816 16 816 -48
WIRE 816 16 784 16
WIRE 1376 16 1344 16
WIRE 1472 16 1472 -48
WIRE 1472 16 1456 16
WIRE -896 32 -1120 32
WIRE -688 32 -896 32
WIRE -896 64 -896 32
WIRE 224 64 208 64
WIRE 816 64 816 16
WIRE 1472 64 1472 16
WIRE 1472 64 816 64
WIRE 1536 64 1472 64
WIRE -688 80 -688 32
WIRE 208 80 208 64
WIRE -1120 96 -1120 32
WIRE 816 112 816 64
WIRE 1472 112 1472 64
WIRE 144 128 128 128
WIRE -896 176 -896 144
WIRE -736 176 -736 160
WIRE -736 176 -896 176
WIRE -576 176 -688 176
WIRE -528 176 -576 176
WIRE -416 176 -448 176
WIRE 32 192 -64 192
WIRE 128 192 128 128
WIRE 128 192 112 192
WIRE 208 192 208 176
WIRE 352 192 208 192
WIRE 480 192 464 192
WIRE 576 192 560 192
WIRE 736 192 656 192
WIRE 768 192 736 192
WIRE 1104 192 1088 192
WIRE 1216 192 1184 192
WIRE 1360 192 1296 192
WIRE 1392 192 1360 192
WIRE 1424 192 1392 192
WIRE -1632 208 -1632 160
WIRE -1552 208 -1632 208
WIRE -1488 208 -1488 160
WIRE -1120 208 -1120 176
WIRE -1120 208 -1216 208
WIRE -416 208 -416 176
WIRE -384 208 -416 208
WIRE 208 208 208 192
WIRE 736 224 736 192
WIRE 1392 224 1392 192
WIRE -1216 240 -1216 208
WIRE -1120 240 -1120 208
WIRE -768 240 -912 240
WIRE -576 240 -688 240
WIRE -528 240 -576 240
WIRE -416 240 -416 208
WIRE -416 240 -448 240
WIRE 128 256 128 192
WIRE 144 256 128 256
WIRE -1632 272 -1632 208
WIRE -912 272 -912 240
WIRE -768 320 -768 240
WIRE -736 320 -768 320
WIRE 208 320 208 304
WIRE 224 320 208 320
WIRE 688 320 688 288
WIRE 736 320 736 304
WIRE 816 320 816 208
WIRE 816 320 736 320
WIRE 1344 320 1344 288
WIRE 1392 320 1392 304
WIRE 1472 320 1472 208
WIRE 1472 320 1392 320
WIRE -1120 368 -1120 320
WIRE -912 368 -912 352
WIRE -912 368 -1120 368
WIRE -704 368 -912 368
WIRE -688 368 -688 336
WIRE -688 368 -704 368
WIRE 720 384 688 384
WIRE 816 384 816 320
WIRE 816 384 800 384
WIRE 1376 384 1344 384
WIRE 1472 384 1472 320
WIRE 1472 384 1456 384
WIRE 816 416 816 384
WIRE 1120 416 816 416
WIRE 1472 416 1472 384
WIRE 1472 416 1120 416
WIRE 1120 480 1120 416
WIRE 1968 480 1968 80
WIRE 1968 480 1120 480
WIRE 1120 512 1120 480
FLAG 464 -176 GH
FLAG 736 -176 G_H1
FLAG 1088 -176 GH
FLAG 1360 -176 G_H2
FLAG 464 192 GL
FLAG 736 192 G_L1
FLAG 1088 192 GL
FLAG 1360 192 G_L2
FLAG 1536 64 phase
FLAG 352 -176 GH
FLAG 352 192 GL
FLAG 1392 -464 0
FLAG 1120 -576 phase
FLAG -896 -432 VH+
FLAG -912 -96 VH-
FLAG -896 32 VL+
FLAG -912 368 VL-
FLAG 208 -304 VH+
FLAG 208 -48 VH-
FLAG 208 64 VL+
FLAG 208 320 VL-
FLAG 1136 -496 startup
FLAG 1104 -320 supply
FLAG 256 -768 VH+
FLAG 384 -448 VH-
FLAG 416 -576 phase
FLAG -96 -768 VL+
FLAG 32 -448 VL-
FLAG 64 -576 0
FLAG -1632 352 0
FLAG -1632 160 PWM_L
FLAG -1488 160 PWMNot_L
FLAG -1216 240 0
FLAG -576 176 out+L
FLAG -576 240 out-L
FLAG -384 208 driverL
FLAG 1120 512 0
FLAG -64 192 driverL
FLAG -1632 -112 0
FLAG -1632 -304 PWM_H
FLAG -1488 -304 PWMNot_H
FLAG -576 -288 out+H
FLAG -576 -224 out-H
FLAG -384 -256 driverH
FLAG -1200 -256 phase
FLAG -64 -176 driverH
FLAG -688 -432 VDDA
FLAG -688 32 VDDB
FLAG -720 -96 VSSA
FLAG -704 368 VSSB
SYMBOL res 560 -160 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName RG_H1
SYMATTR Value {Rg}
SYMBOL res 1200 -160 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName RG_H2
SYMATTR Value {Rg}
SYMBOL voltage 1968 -16 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 36
SYMBOL res 560 208 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName RG_L1
SYMATTR Value {Rg}
SYMBOL res 1200 208 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName RG_L2
SYMATTR Value {Rg}
SYMBOL ind 1120 -560 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 380µ
SYMBOL res 1232 -560 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R_Load
SYMATTR Value 2.6m
SYMBOL voltage 1392 -560 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V5
SYMATTR Value 0
SYMBOL PHPT60415NY 192 -240 R0
SYMATTR InstName U5
SYMBOL PHPT60415PY 192 -112 M180
SYMATTR InstName U6
SYMBOL res 128 -192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R_BJT_H
SYMATTR Value 1
SYMBOL res 1376 -160 R0
SYMATTR InstName R2
SYMATTR Value 100k
SYMBOL zener 704 -144 M0
SYMATTR InstName D1
SYMATTR Value EDZV10B
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL diode 704 16 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL PHPT60415NY 192 128 R0
SYMATTR InstName U1
SYMBOL PHPT60415PY 192 256 M180
SYMATTR InstName U2
SYMBOL res 128 176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R_BJT_L
SYMATTR Value 1
SYMBOL zener 1360 -144 M0
SYMATTR InstName D3
SYMATTR Value EDZV10B
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL diode 1360 16 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMATTR Value 1N4148
SYMBOL diode 704 384 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D6
SYMATTR Value 1N4148
SYMBOL zener 1360 224 M0
SYMATTR InstName D7
SYMATTR Value EDZV10B
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL diode 1360 384 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D8
SYMATTR Value 1N4148
SYMBOL res 720 -160 R0
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL res 720 208 R0
SYMATTR InstName R3
SYMATTR Value 100k
SYMBOL res 1376 208 R0
SYMATTR InstName R4
SYMATTR Value 100k
SYMBOL res 800 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 20m
SYMBOL res 1472 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 20m
SYMBOL res 816 368 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 20m
SYMBOL res 1472 368 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 20m
SYMBOL ind 464 -160 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L2
SYMATTR Value 30n
SYMBOL ind 464 208 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L3
SYMATTR Value 30n
SYMBOL ind 1088 208 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L4
SYMATTR Value 30n
SYMBOL ind 1088 -160 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L5
SYMATTR Value 30n
SYMBOL zener 704 224 M0
SYMATTR InstName D5
SYMATTR Value EDZV10B
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL InfineonNMOS\\IPT012N08N5_L1 768 112 R0
SYMATTR InstName U3
SYMBOL InfineonNMOS\\IPT012N08N5_L1 1424 112 R0
SYMATTR InstName U4
SYMBOL InfineonNMOS\\IPT012N08N5_L1 1424 -256 R0
SYMATTR InstName U7
SYMBOL InfineonNMOS\\IPT012N08N5_L1 768 -256 R0
SYMATTR InstName U8
SYMBOL cap 176 -608 R0
SYMATTR InstName C1
SYMATTR Value 10µ
SYMBOL cap 240 -656 R0
SYMATTR InstName C2
SYMATTR Value 4.7µ
SYMBOL cap 304 -656 R0
SYMATTR InstName C3
SYMATTR Value 100n
SYMBOL cap 240 -560 R0
SYMATTR InstName C4
SYMATTR Value 4.7µ
SYMBOL cap 304 -560 R0
SYMATTR InstName C5
SYMATTR Value 100n
SYMBOL res 352 -448 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 10m
SYMBOL res 272 -640 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R6
SYMATTR Value 10m
SYMBOL cap -176 -608 R0
SYMATTR InstName C6
SYMATTR Value 10µ
SYMBOL cap -112 -656 R0
SYMATTR InstName C7
SYMATTR Value 4.7µ
SYMBOL cap -48 -656 R0
SYMATTR InstName C8
SYMATTR Value 100n
SYMBOL cap -112 -560 R0
SYMATTR InstName C9
SYMATTR Value 4.7µ
SYMBOL cap -48 -560 R0
SYMATTR InstName C10
SYMATTR Value 100n
SYMBOL res 0 -448 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 10m
SYMBOL res -80 -640 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R8
SYMATTR Value 10m
SYMBOL voltage -1120 80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 15
SYMBOL voltage -1120 224 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V9
SYMATTR Value 8.7
SYMBOL nmos -736 240 R0
SYMATTR InstName M1
SYMATTR Value FDMS3615SQ2
SYMBOL pmos -736 80 R0
WINDOW 3 59 10 Left 2
SYMATTR InstName M2
SYMATTR Value FDR840P
SYMBOL res -432 224 R90
WINDOW 0 56 -6 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 0.55
SYMBOL res -432 160 R90
WINDOW 0 1 13 VBottom 2
WINDOW 3 -25 55 VTop 2
SYMATTR InstName R14
SYMATTR Value 1
SYMBOL voltage -1632 256 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -220 55 Left 2
SYMATTR InstName V16
SYMATTR Value PULSE(0 1 {11u+t_onH+DT} 10n 10n {t_onL} {T})
SYMBOL Digital\\inv -1552 144 R0
SYMATTR InstName A1
SYMBOL bv -896 48 R0
WINDOW 3 -124 56 Left 2
SYMATTR InstName B1
SYMATTR Value V = V(PWM_L)*VoltageLevel
SYMBOL bv -912 256 R0
WINDOW 3 -124 56 Left 2
SYMATTR InstName B2
SYMATTR Value V = V(PWMNot_L)*VoltageLevel
SYMBOL voltage -1120 -384 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 15
SYMBOL voltage -1120 -240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V10
SYMATTR Value 8.7
SYMBOL nmos -736 -224 R0
SYMATTR InstName M3
SYMATTR Value FDMS3615SQ2
SYMBOL pmos -736 -384 R0
WINDOW 3 59 10 Left 2
SYMATTR InstName M4
SYMATTR Value FDR840P
SYMBOL res -432 -240 R90
WINDOW 0 56 -6 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 0.55
SYMBOL res -432 -304 R90
WINDOW 0 1 13 VBottom 2
WINDOW 3 -25 55 VTop 2
SYMATTR InstName R16
SYMATTR Value 1
SYMBOL Digital\\inv -1552 -320 R0
SYMATTR InstName A2
SYMBOL bv -896 -416 R0
WINDOW 3 -124 56 Left 2
SYMATTR InstName B3
SYMATTR Value V = V(PWM_H)*VoltageLevel
SYMBOL bv -912 -208 R0
WINDOW 3 -124 56 Left 2
SYMATTR InstName B4
SYMATTR Value V = V(PWMNot_H)*VoltageLevel
SYMBOL voltage -1632 -208 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -204 57 Left 2
SYMATTR InstName V17
SYMATTR Value PULSE(0 1 11u 10n 10n {t_onH} {T})
TEXT -120 576 Left 2 !.tran 0 110u 0 .1us
TEXT -120 800 Left 2 !.options gmin=1e-10\n.options cshunt=1e-15\n.options reltol=0.003\n.options abstol=1e-10
TEXT -112 648 Left 2 !.param Rg 2.7
TEXT -136 624 Left 2 ;Gate resistance
TEXT 1056 -640 Left 2 ;Phase load
TEXT -136 776 Left 2 ;Simulation options, this parameters help the solver. Got from LTSpiceWIki
TEXT -136 552 Left 2 ;Transient control
TEXT -144 720 Left 2 !.param duty=0.591 freq=20k T={1/freq} DT=1u t_onH={T*duty-DT} t_onL={T*{1-duty}-DT}
TEXT -136 696 Left 2 ;Frequency control  -  PWM
TEXT 1216 -648 Left 2 !.ic I(L1)=100
TEXT 184 -848 Left 2 ;Capacitor bank high side
TEXT -168 -848 Left 2 ;Capacitor bank low side
TEXT -1856 -16 Left 2 ;PWM Generation: Low Side
TEXT -1224 -16 Left 2 ;Driver Model
TEXT -1064 -480 Left 2 !.param VoltageLevel=3
TEXT -1864 -480 Left 2 ;PWM Generation: High Side
TEXT -1224 -480 Left 2 ;Driver Model
RECTANGLE Normal -1328 400 -1872 0 2
RECTANGLE Normal -1328 -64 -1872 -464 2
RECTANGLE Normal -272 -64 -1280 -464 2
RECTANGLE Normal -272 400 -1280 0 2
